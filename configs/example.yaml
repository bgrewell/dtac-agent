include:
  - "$XDG_CONFIG_HOME/dtac/config.d/*.yaml"
  - "~/.config/dtac/config.d/*.yaml"
  - "/etc/dtac/config.d/*.yaml"
auth:
  admin: admin
  default_secure: true
  model: /etc/dtac/auth_model.conf
  pass: need_to_generate_a_random_password_on_install_or_first_run
  policy: /etc/dtac/auth_policy.csv
  access_token_expiration: 15m
  refresh_token_expiration: 168h
  # static_testing_token: A static token for testing purposes only. When set, this token
  # bypasses normal JWT authentication and grants admin access. Leave empty in production.
  # Example: static_testing_token: "my-static-test-token-DO-NOT-USE-IN-PRODUCTION"
  static_testing_token: ""
apis:
  grpc:
    enabled: true
    port: 8181
    reflection: false
    tls:
      enabled: true
      profile: default
  json:
    enabled: false
    port: 8182
    tls:
      enabled: true
      profile: default
  rest:
    enabled: true
    port: 8180
    tls:
      enabled: true
      profile: default
    cors:
      enabled: false
      allowed_origins:
        - "*"
      allowed_methods:
        - GET
        - POST
        - PUT
        - DELETE
        - OPTIONS
      allowed_headers:
        - Origin
        - Content-Type
        - Accept
        - Authorization
      exposed_headers:
        - Content-Length
      allow_credentials: false
      max_age: 3600
lockout:
  auto_unlock_time: 10s
  enabled: true
output:
  log_level: debug
  wrap_responses: false
plugins:
  dir: /opt/dtac/plugins/
  enabled: true
  group: plugins
  load_unconfigured: false
  tls:
    enabled: true
    profile: default
  entries:
    hello:
      config:
        message: hello world plugin
      enabled: true
      hash: ""
      user: ""
modules:
  dir: /opt/dtac/modules/
  enabled: false
  group: modules
  load_unconfigured: false
  tls:
    enabled: true
    profile: default
  entries:
    hello:
      config: {}
      enabled: false
      hash: ""
      user: ""
    helloweb:
      config:
        port: 8090
        debug: true  # Enable debug logging to see HTTP request details
        # Runtime environment variables for frontend applications
        # These are exposed via /config.js for React/Vite apps to consume at runtime
        # instead of build time. Access in JS via: window.__DTAC_CONFIG__.API_URL
        runtime_env:
          API_URL: https://api.example.com
          API_TOKEN: your-api-token
          FEATURE_FLAGS: "true"
          APP_VERSION: "1.0.0"
        proxy_routes:
          # Example 1: MAAS API proxy with OAuth 1.0a authentication
          # MAAS requires a 3-part API key: consumer_key:token_key:token_secret
          # Requests to /api/maas/* will be proxied to the MAAS API
          # Example: GET /api/maas/machines/ -> GET http://192.168.1.100:5240/MAAS/api/2.0/machines/
          - name: maas
            target: http://192.168.1.100:5240/MAAS/api/2.0
            strip_path: true
            auth_type: oauth
            credentials:
              oauth_consumer_key: eLck5PkZFx7huB1Ccu
              oauth_token: ZclTMGR9siVm565E3k
              oauth_token_secret: 2BeUziHI5Gf3K7sRhn5c4YFZHqxd36Qh
          
          # Example 2: Named endpoint with basic authentication
          - name: jenkins
            target: http://jenkins.internal:8080
            strip_path: true
            auth_type: basic
            credentials:
              username: api-user
              password: api-password
          
          # Example 3: Named endpoint with custom headers
          - name: custom-service
            target: http://service.internal:3000/api
            strip_path: true
            auth_type: none
            credentials:
              headers:
                X-API-Key: your-api-key
                X-Service-Version: v1
          
          # Example 4: Custom path (not using default /api/<name>)
          - name: legacy-api
            path: /legacy/endpoint/
            target: http://legacy.internal:8000
            strip_path: true
            auth_type: none
      enabled: false
      hash: ""
      user: ""
subsystems:
  auth: true
  diag: true
  echo: true
  hardware: true
  network: true
  validation: true
tls:
  default:
    ca: /etc/dtac/certs/ca.crt
    cert: /etc/dtac/certs/tls.crt
    create_if_missing: true
    domains:
      - localhost
    enabled: true
    key: /etc/dtac/certs/tls.key
    type: self-signed